<!-- <!DOCTYPE html>  -->
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf/passthrough">
	<!-- xmlns:ui="http://xmlns.jcp.org/jsf/facelets" -->
	<!-- jsf:id == chamada do elemento passthrough do JSF para perfmitir o uso de tags do html no JSF -->
<h:head>	
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="description" content="Página Cadastro EscolhaCerta"/>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<title>Cadastro</title>				
		
<h:outputStylesheet library="css" name="cadastro.css" />
<!-- biblioteca de CSS do Bootstrap -->
<h:outputStylesheet library="bootstrap/css" name="bootstrap.min.css" />
<!-- favicon == icone na aba de título do navegador, #{request.contextPath} aponta para a raíz do projeto 
	para ser possível -->
<link rel="shortcut icon" type="image/x-icon" href="#{request.contextPath}/resources/img/favicon.ico" />
<link rel="stylesheet" href="resources/bootstrap/css/bootstrap.min.css" />
<!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" /> -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" jsf:integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" jsf:crossorigin="anonymous" />
<!--
<script type="text/javascript">
                $(function(e) {
                    $('#cpf').hide();
                });
        
                function show_hide(){
                    var valor = $("#country").val();

                    if(valor == 'Brazil'){
                         $("#cpf").show();
                         $("#cpf").attr('required', ''); 
                     } else {
                         $("#cpf").hide();
                         $("#cpf").removeAttr('required');
                     }
                };
            
                function nameValidation(){
                    var nome = $("#name").val();
                    if(nome == " " || nome == null || nome.length < 3){
                        this.nameError()
                    }
                    else {
                        $("#name").css('border-color','black');
                        $("#div_name").hide();
                        return true;
                    }
                }
                
                function nameError(){
                    $("#div_name").css('color','red');
                    $("#name").css('border-color','red');
                    $("#div_name").text("Name not valid!").show();    
                    return false;
                }
            
                function usernameValidation(){
                    var usuario = $("#username").val();
                    if(usuario == " " || usuario == null || usuario.length < 3){
                        this.usernameError()
                    }
                    else {
                        $("#div_username").hide();
                        $("#username").css('border-color','black');
                        return true;
                    }
                }
            
                function usernameError(){
                    $("#div_username").css('color','red');
                    $("#username").css('border-color','red');
                    $("#div_username").text("Username not valid!").show();    
                    return false;
                }
            
                function pwdValidation1(){
                    var senha = $("#pwd1").val();
                    var regex = /^(?=(?:.*?[A-Z]))(?=(?:.*?[0-9]))(?=(?:.*?[!@#$%*()_+^&}{:;?.]){1})(?!.*\s)[0-9a-zA-Z!@#$%;*(){}_+^&]*$/; 

                    if(senha.length < 8)
                    {
                        $("#div_pwd1").css('color','red');
                        $("#pwd1").css('border-color','red');
                        $("#div_pwd1").text("Password must be at least 8 characters long.").show(); 
                        return false;
                    }
                    else if(!regex.exec(senha))
                    {
                        $("#div_pwd1").css('color','red');
                        $("#pwd1").css('border-color','red');
                        $("#div_pwd1").text("Password must contain at least 1 capital character, 1 number and 1 especial character.").show(); 
                        return false;
                    }
                        $("#pwd1").css('border-color','black');
                        $("#div_pwd1").hide();
                    return true;
                }
            
                function pwdValidation2(){
                    return true;
                }
            
                function pwdComparationValidation(){
                    var pwd1 = $("#pwd1").val();
                    var pwd2 = $("#pwd2").val();
                    if(pwd1==pwd2){
                        $("#div_pwd2").hide();
                        $("#pwd2").css('border-color','black');
                        return true;
                    }
                    else{
                        $("#div_pwd2").css('color','red');
                        $("#pwd2").css('border-color','red');
                        $("#div_pwd2").text("The passwords don't match.").show();  
                        return false;
                    }
                }
            
                function emailValidation(){
                    var email = $("#email").val();
                    var user = email.substr(0, email.indexOf("@"));
                    console.log(user);
                    var domain = email.substr(email.indexOf("@"),email.length);
                    console.log(domain);

                    if ((user.length >=1) &&
                        (domain.length >=3) && 
                        (user.search("@")==-1) && 
                        (domain.search("@")!=-1) &&
                        (user.search(" ")==-1) && 
                        (domain.search(" ")==-1) &&
                        (domain.search(".")!=-1) &&      
                        (domain.indexOf(".") >=1)&& 
                        (domain.lastIndexOf(".") < domain.length - 1)) {
                        
                            $("#div_email").hide();
                            $("#email").css('border-color','black');
                            return true;
                        
                    } else {
                        $("#div_email").css('color','red');
                        $("#email").css('border-color','red');
                        $("#div_email").text("Invalid email.").show(); 
                        return false;
                    }
                    
                }
            
                function cpfValidation(){
                    var cpf = $("#cpf").val();
                    var sum;
                    var rest;
                    sum = 0;
                    if (cpf == "00000000000"){
                        return cpfError();
                    }

                    for (i=1; i<=9; i++){
                        sum = sum + parseInt(cpf.substring(i-1, i)) * (11 - i);
                    }
                    rest = (sum * 10) % 11;

                    if ((rest == 10) || (rest == 11)){
                        rest = 0;
                    }
                    if (rest != parseInt(cpf.substring(9, 10)) ){
                        return cpfError();
                    }

                    sum = 0;
                    for (i = 1; i <= 10; i++){
                        sum = sum + parseInt(cpf.substring(i-1, i)) * (12 - i);
                    }
                    rest = (sum * 10) % 11;

                    if ((rest == 10) || (rest == 11)){
                        rest = 0;
                    }
                    if (rest != parseInt(cpf.substring(10, 11) ) ){
                        return cpfError();
                    }
                    $("#div_cpf").hide();
                    $("#cpf").css('border-color','black');
                    return true;
                }
            
                function cpfError(){
                    $("#div_cpf").css('color','red');
                    $("#cpf").css('border-color','red');
                    $("#div_cpf").text("CPF not valid!").show();
                    return false;
                }

                function allValidations(){
                    var count = 0;
                    if(!nameValidation()){
                        count++;
                    }
                    if(!usernameValidation()){
                        count++;
                    }
                    if(!pwdValidation1()){
                        count++;
                    }
                    if(!pwdValidation2()){
                        count++;
                    }
                    if(!pwdComparationValidation()){
                        count++;
                    }
                    if(!emailValidation()){
                        count++;
                    }
                    var country = $("#country").val();
                    if(country=='Brazil'){
                        if(!cpfValidation()){
                            count++;
                            console.log("Oi");
                        }
                    }
                    if(count==0)
                        return true;
                    else
                        console.log(count);
                        return false;
                }
            
                    $(document).ready(function () { 
                    var $seuCampoCpf = $("#cpf");
                    $seuCampoCpf.mask('000.000.000-00', {reverse: true});
                });
            
</script>  -->
</h:head>
<h:body>
<!-- Header cadastro mobile -->
<div class="container d-block d-sm-none d-lg-none clearfix">
	<div class="row">
		<div class="logo-header col-xs-3 col-offset-xs-3">
			<h:graphicImage id="img" 
					value="/resources/img/logo-escolha-certa-mini.png" 
					alt="Logotipo EsolhaCerta" 
					styleClass="mobile-img" />				
		</div>
	</div>
</div>
	
<!-- Cadastro Mobile -->
<div class="row">
	<div class="d-block d-sm-none">
	<h1 class="display-5 ml-5 mt-3">Cadastre-se</h1>
		<div class="container ml-4">
			<span role="presentation" class="active">
				<h:form>
					<h:link value="Dados Cadastrados" 
							outcome="" />		
				</h:form>		
				Teste: #{userAreaManagedBean.usuario.getNome(0)}
			</span>
			
		<div class="list-group">
		<h:form id="cadastroUsuario">
			<p class="list-group-item">
				<h:outputText>Nome:</h:outputText>
				<h:inputText jsf:placeholder="Digite seu nome ..."
							 jsf:type="text" 
							 styleClass="form-control" 
							 aria-describedby="sizing-addon3" 
							 value="#{cadastroManagedBean.usuario.nome}"/>
			</p>
			<p class="list-group-item">
				<h:outputText>Email:</h:outputText>
				<h:inputText jsf:placeholder="Digite seu email ..."
							 jsf:type="email" 
							 styleClass="form-control" 
							 aria-describedby="sizing-addon3" 
							 value="#{cadastroManagedBean.usuario.email}"/>
			</p>	
			<p class="list-group-item">
					<h:outputText> Senha: </h:outputText> <h:inputSecret jsf:placeholder="Digite sua senha ..." 
								class="form-control" 
								aria-describedby="sizing-addon3" 
								value="#{cadastroManagedBean.usuario.senha}" />					
			</p>
			<p class="form-group">
				<p class="list-group-item"><h:outputText> Nasc.: </h:outputText></p>
				<span class='input-group date' id='datetimepicker1'>				
					<h:inputText jsf:placeholder="Digite seu nasc. ..." 
								 styleClass="form-control"
								 jsf:type="date" 
								 value="#{cadastroManagedBean.usuario.nasc}" >
							<f:convertDateTime pattern="yyyy/MM/dd"/>
					</h:inputText>
					<span class="input-group-addon">
						<span class="fa fa-calendar"></span>
					</span>
				</span>
			</p>
			<p class="list-group-item">	
				<h:outputText> CPF: </h:outputText> 
				<h:inputText jsf:placeholder="Digite seu CPF ..." 
							class="form-control" aria-describedby="sizing-addon3"  value="#{cadastroManagedBean.usuario.CPF}" />
			</p>
			<p class="list-group-item">	
			<h:outputText>Cidade: </h:outputText> 
				<h:inputText  jsf:placeholder="Digite seu Cidade ..." 
							  styleClass="form-control" jsf:aria-describedby="sizing-addon3"
							  value="#{cadastroManagedBean.usuario.cidade}" />
			</p>								
			<!-- <p class="list-group-item">	
				<h:outputText>Estado:	</h:outputText>
				<h:selectOneMenu value="#{cadastroManagedBean.usuario.estado}"/>  -->
				<!-- ui:repeat itera todos os itens de estado --> 
			<!-- <ui:repeat class="dropdown-menu" var="item" value="#{cadastroManagedBean.usuario.estado}">
					<li>#{item.toString()}</li>
				</ui:repeat>									
			</p>  -->
			<h:commandButton value="Salvar" action="#{cadastroManagedBean.incluiUsuario()}" class="btn btn-default" />
		</h:form>
	</div>
</div>

<div class="col-xs-4 col-offset-xs-4" aria-label="...">
    <ul class="pager">
	    <li>
			<h:link outome="#">
				<span jsf:icon="far fa-circle"></span>
			 </h:link>
		</li>
		<li>
			<h:link outome="#">
				<span jsf:icon="far fa-circle"></span>
			</h:link>
		</li>
    </ul>
</div>
		
</div>	 
<!-- Fim cadastro mobile -->

<!-- Cadastro tablet and up -->
<div class="form d-none d-sm-block col-xs-12 col-sm-8 col-md-8 col-lg-8 pb-5">			
	<div role="main" class="">
		<div class="d-none d-sm-block pl-5 pt-3">
			<h:graphicImage value="/resources/img/logo-escolha-certa-mini.png" alt="Logotipo EsolhaCerta" />			
		</div>
		<div id="container text-right">
				
		<!-- Display: determina tamanho do texto (mais alto menor), m-5 margem -->
			<h1 class="display-5 ml-5 mt-3">Cadastre-se</h1>				
				<div class="ml-5 mt-4">
					<div class="input-group">
						<!-- Aqui começa o formulário de cadastro -->
						<h:form id="cadastroUser">
						  <span style="width:100%">
						  	<!-- da classe abaixo col-md-2 col-lg-2 -->
							<div class="d-inline-block">
								<h:outputText value="Nome: " style="font-weight: bold;" /> 
							</div> 
								<h:inputText jsf:placeholder="Digite seu nome ..." 
											 jsf:type="text"
											 id="nome"
											 styleClass="form-control col-md-7 col-lg-7" 
									     	 jsf:aria-describedby="sizing-addon3" 
									     	 value="#{cadastroManagedBean.usuario.nome}" />
								<h:message for="nome" 
										   showSummary="True"
										   showDetail="True" />									
						  </span>
						  						  
						  <span style="width:100%">
						  	<!-- da classe abaixo col-md-2 col-lg-2 -->
							<div class="d-inline-block">
								<h:outputText value="E-mail: " style="font-weight: bold;" /> 
							</div> 
								<h:inputText jsf:placeholder="Digite seu email ..." 
											 jsf:type="email"
											 id="email"
											 styleClass="form-control col-md-7 col-lg-7" 
									     	 jsf:aria-describedby="sizing-addon3" 
									     	 value="#{cadastroManagedBean.usuario.email}" />
								<h:message for="email" 
										   showSummary="True"
										   showDetail="True" />									
						  </span>
						  
						  <span style="width:40%">		
						  	<!-- col-md-2 col-lg-2 -->					
							<div class="d-inline-block">
								<h:outputText value="Senha: " style="font-weight: bold;" />
							</div>
								<h:inputSecret jsf:placeholder="Digite sua senha ..."
											   id="senha"									  		   
											   styleClass="form-control col-md-7 col-lg-7" 
											   jsf:aria-describedby="sizing-addon3" 
											   value="#{cadastroManagedBean.usuario.senha}"/>
								<h:message for="senha" 
										   showSummary="True"
										   showDetail="True" />			   								
						  </span>
						  
						  <span style="width:100%">											
							<p class="form-group">
								<!-- col-md-2 col-lg-2 -->
								<div class="d-inline-block">
									<h:outputText value="Nasc.: " style="font-weight: bold;" />
								</div>
								<span class='input-group date' id='datetimepicker1' style="width: 350px;">				
									<h:inputText jsf:placeholder="Digite seu nasc. ..." 
												 jsf:type="date"
												 styleClass="form-control col-md-7 col-lg-7"												 
												 value="#{cadastroManagedBean.usuario.nasc}" 
												 style="width:90% !important;">
										<f:convertDateTime pattern="dd/MM/yyyy" id="data-de-nascimento" />
									</h:inputText>
									<span class="input-group-addon">
					                	<span class="glyphicon glyphicon-calendar"></span>
					                </span>
					                <h:message for="data-de-nascimento" 
										   showSummary="True"
										   showDetail="True" />
								</span>								
							</p>
						  </span>
						  
						  <span style="width:60%">	
						  	<!-- col-md-2 col-lg-2 -->
							<div class="d-inline-block">
								<h:outputText value="CPF: " style="font-weight: bold;" />
							</div>							
							<h:inputText jsf:placeholder="Digite seu CPF ..."
										 id="CPF" 
										 styleClass="form-control col-md-7 col-lg-7" 
										 jsf:aria-describedby="sizing-addon3"  
										 value="#{cadastroManagedBean.usuario.CPF}" />
							<h:message for="CPF" 
									   showSummary="True"
									   showDetail="True" />							
						  </span>
						  
						  <span style="width:50%">
						  	<!-- col-md-2 col-lg-2 -->	
							<div class="d-inline-block"> <h:outputText value="Cidade:" style="font-weight: bold;" /> </div> 
								<h:inputText jsf:placeholder="Digite seu Cidade ..."
											 id="cidade" 
											 styleClass="form-control col-md-7 col-lg-7" 
											 aria-describedby="sizing-addon3" 
											 value="#{cadastroManagedBean.usuario.cidade}" />
								<h:message for="cidade" 
										   showSummary="True"
										   showDetail="True" />															
						  </span>
						  
						  <span style="width:70%">		
						  	<!-- col-md-2 col-lg-2 -->			
							<div class="d-inline-block">
								<h:outputText value="Estado: " style="font-weight: bold;" />
							</div>
								<!-- dropdown-menu col-md-7 col-lg-7 -->
								<!-- <f:selectItems value="#{cadastroManagedBean.usuario.estado}" /> -->
								<h:selectOneMenu id="estado"
												 styleClass="" 
												 value="#{cadastroManagedBean.usuario.estado}">
										<f:selectItems value="#{cadastroManagedBean.usuario.estado}" />
								</h:selectOneMenu> 
								<h:message for="estado" 
										   showSummary="True"
										   showDetail="True" />
									<!-- <ui:repeat class="dropdown-menu col-md-7 col-lg-7" var="item" value="#{gestaoProdutosBean_Aula2.produtos}">
										<li>#{item.nome}</li>
									</ui:repeat>  -->								
						  </span>						  	
						  <h:messages id="successMsg" sticky="true" style="color: red; font-weight: bold" />	
						  <p><h:commandButton value="Cadastrar" id="cadastroBtn" 
						  					  action="#{cadastroManagedBean.incluiUsuario}" 
						  					  update=":successMsg"
						  					  styleClass="btn btn-default" style="float: right" /></p>
						</h:form>
					</div>
				</div>
			</div>
		</div>
</div>
<!-- Informação lateral, apresentação do site -->				
<aside role="complementary" class="d-none d-sm-block presentation col-xs-0 col-sm-4 col-md-4 col-lg-4">								
	<div class="position">
		<h:graphicImage value="/resources/img/lamp.png" alt="Lampada" />
		<p>A <b>EscolhaCerta</b> de um produto nunca foi tão fácil</p>
		<p class="text-box d-inline">Você busca produtos de acordo com a experiência de outros consumidores.</p>
	</div>		
</aside>
<!-- Termina sessão lateral de apresentação do site -->
<!-- div de encerramento do container -->
</div>
<!-- footer -->
<footer class="nav-container">
	<div class="page-header p-4" style="background-color:#f1f1f1;"></div>
</footer>		
		
		<!-- Calendar code -->
		<script type="text/javascript">
            $(function () {
                $('#datetimepicker1').datetimepicker();
            });
        </script>
		
		<!-- Javascript das dependências do Bootstrap -->					
		<script src="resources/bootstrap/js/jquery.min.js"></script>
	  	<script src="resources/bootstrap/js/popper.min.js"></script>
	  	<script src="resources/bootstrap/js/bootstrap.min.js"></script>
</h:body>
</html>