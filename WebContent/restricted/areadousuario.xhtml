<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf/passthrough">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="description" content="Área do Usuário - EscolhaCerta"/>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<title>Área do Usuário</title>				
		
<!-- CSS do Bootstrap -->
<h:outputStylesheet library="css" name="areadousuario.css" />
<h:outputStylesheet library="bootstrap/css" name="bootstrap.min.css" />

<link rel="shortcut icon" type="image/x-icon" href="#{request.contextPath}/resources/img/favicon.ico" />
<link rel="stylesheet" href="#{request.contextPath}/resources/bootstrap/css/bootstrap.min.css" />
<!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" /> -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" jsf:integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" jsf:crossorigin="anonymous" />
</h:head>
<h:body> 
<nav class="d-block d-sm-none d-lg-none row clearfix">
	<div class="logo-header col-xs-4 col-offset-xs-4 pl-5 pt-3">
		<img src="/escolhacerta/resources/img/logo-escolha-certa-mini.png" alt="Logotipo EsolhaCerta" class="mobile-img" />
	</div>
	<div class="link float-right pr-2"><a href="#" class="navbar-brand" action="areadousuario?faces-redirect=true" style="color: white;">Sair</a></div>
</nav>
<div class="row">
	<!-- Cadastro tablet and up -->
	<aside class="form d-none d-sm-block col-xs-12 col-sm-8 col-md-8 col-lg-8 pb-5" style="overflow:auto;">			
		<div role="main" class="">
		<div class="d-none d-sm-block pl-5 pt-3"><img src="./resources/img/logo-escolha-certa-mini.png" alt="Logotipo EsolhaCerta" /></div>
			<div id="container text-right">		
				<!-- Display: determina tamanho do texto (mais alto menor), m-5 margem -->
				<h1 class="display-5 ml-5 mt-3">Área do Usuário</h1>
				
				<!-- <h:outputText value="#{loginManagedBean.usuario.nome}" />
				<h:outputText value="#{loginManagedBean.email}" /> -->
				
				<h:outputText value="#{loginManagedBean.session.getParam('usuario')}" />
						
				<div class="ml-5 mt-4">
					<div class="input-group">
						<h:form>
						<h:panelGrid columns="2">
							<f:facet name="header"><p style="color: blue;">Seus Dados</p></f:facet>
								<h:outputLabel value="E-mail:" style="color: blue; font-weight: 700;"/> 
								<h:panelGroup>
								<h:inputText jsf:placeholder="#{loginManagedBean.usuario.email}"
											 value="#{loginManagedBean.usuario.email}"
												   jsf:type="email" 
												   styleClass="form-control" 
												   style="width: 350px; border: 1px solid blue;"
									     		   jsf:aria-describedby="sizing-addon3" 
									     		   binding="#{cadastroBean.email}"
									     		   disabled="true" />

								<h:commandLink value="alterar" 
									styleClass="alteradados"
									style="color: orange; font-weight: 700;"
									binding="#{cadastroBean.linkEmail}"
									action="#{cadastroBean.desativaEmail}" />
									<!-- outcome="" -->
								</h:panelGroup>			
							
								<h:outputLabel value="Senha:" style="color: blue; font-weight: 700;" />
								<h:panelGroup> 
									<h:inputSecret jsf:placeholder="#{loginManagedBean.usuario.senha}"
											 	   value="#{loginManagedBean.usuario.senha}"
														 jsf:type="password" 
														 styleClass="form-control"
														 style="width: 220px; border: 1px solid blue;" 
														 jsf:aria-describedby="sizing-addon3" 
														 binding="#{cadastroBean.senha}"
														 disabled="true" />
														 <!-- 
														 value="#{userArea.senha}"
														 binding="#{cadastroBean.senha}"
														 disabled="true" -->
									<h:commandLink value="alterar" 
										styleClass="alteradados" 
										style="color: orange; font-weight: 700;"
										binding="#{cadastroBean.linkSenha}"
										action="#{cadastroBean.desativaSenha}" />
										<!-- outcome="" -->
								</h:panelGroup>
											
							<h:outputLabel value="Nasc.: " style="color: blue; font-weight: 700;"/>
							<h:panelGroup>
								<span class='input-group date' id='datetimepicker1' style="width: 220px">				
									<h:inputText jsf:placeholder="#{loginManagedBean.usuario.nasc}"
											 	 value="#{loginManagedBean.usuario.nasc}"
												 jsf:type="date" 
												 styleClass="form-control" 
												 style="border: 1px solid blue;"
												 binding="#{cadastroBean.data}"
												 disabled="true" >
												 <!--  
												 value="#{userArea.nasc}" -->
										<f:convertDateTime pattern="dd/MM/yyyy"/>
									</h:inputText>
									<span class="input-group-addon">
					                	<span class="glyphicon glyphicon-calendar"></span>
					                </span>
								</span>
								<h:commandLink value="alterar" 
									styleClass="alteradados" 
									style="color: orange; font-weight: 700;"
									binding="#{cadastroBean.linkData}"
									action="#{cadastroBean.desativaData}" />
									<!-- outcome="" -->
							</h:panelGroup>
							
							<h:outputLabel value="CPF:" style="color: blue; font-weight: 700;" />
								
							<h:panelGroup>
								<h:inputText jsf:placeholder="#{loginManagedBean.usuario.CPF}"
											 value="#{loginManagedBean.usuario.CPF}" 
												      styleClass="form-control" 
												      style="width: 190px; border: 1px solid blue;"
												      jsf:aria-describedby="sizing-addon3"
												      binding="#{cadastroBean.cpf}"
												      disabled="true" />
												      <!-- 
												      value="#{userArea.cpf}"
												       -->
									<h:commandLink value="alterar" 
										styleClass="alteradados" 
										style="color: orange; font-weight: 700;"
										binding="#{cadastroBean.linkCPF}"
										action="#{cadastroBean.desativaCPF}" />
										<!-- outcome="" -->
							</h:panelGroup>
							
							<h:outputLabel value="Cidade:" style="color: blue; font-weight: 700;" />
								<h:panelGroup> 
									<h:inputText jsf:placeholder="#{loginManagedBean.usuario.cidade}"
											 	 value="#{loginManagedBean.usuario.cidade}" 
												 styleClass="form-control"
												 style="width: 190px; border: 1px solid blue;" 
												 jsf:aria-describedby="sizing-addon3"
												 binding="#{cadastroBean.cidade}"
												 disabled="true" />
									<h:commandLink value="alterar" 
										styleClass="alteradados" 
										style="color: orange; font-weight: 700;"
										binding="#{cadastroBean.linkCidade}"
										action="#{cadastroBean.desativaCidade}"/>
										<!-- outcome="" -->
								</h:panelGroup>
							
							<h:outputLabel value="Estado: " style="color: blue; font-weight: 700;" />	
								<h:panelGroup>
									<h:inputText jsf:placeholder="#{loginManagedBean.usuario.estado}"
											 	 value="#{loginManagedBean.usuario.estado}"
											 	 id="estado" 
												 styleClass="form-control"
												 style="width: 190px; border: 1px solid blue;" 
												 jsf:aria-describedby="sizing-addon3"
												 binding="#{cadastroBean.estado}"
												 disabled="true" />
									<h:commandLink value="alterar" 
										styleClass="alteradados" 
										style="color: orange; font-weight: 700;"
										binding="#{cadastroBean.linkEstado}"
										action="#{cadastroBean.desativaEstado}" />
										<!-- outcome="" -->
								</h:panelGroup>
								<h:outputLabel value="CEP:" style="color: blue; font-weight: 700;" />
								<h:panelGroup> 
									<h:inputText jsf:placeholder="#{loginManagedBean.usuario.cep}"
											 	 value="#{loginManagedBean.usuario.cep}" 
												 styleClass="form-control"
												 style="width: 190px; border: 1px solid blue;" 
												 jsf:aria-describedby="sizing-addon3"
												 binding="#{cadastroBean.cep}"
												 disabled="true" />
												 <!-- 
												 value="#{userArea.cidade}" -->
									<h:commandLink value="alterar" 
										styleClass="alteradados" 
										style="color: orange; font-weight: 700;"
										binding="#{cadastroBean.linkCep}"
										action="#{cadastroBean.desativaCep}"/>
										<!-- outcome="" -->
								</h:panelGroup>
							
							<p>
								<h:commandButton value="Atualizar Usuário" action="#{loginManagedBean.incluiUsuario}" 
												styleClass="btn btn-default" style="float:right"/>
								<h:commandButton value="Deletar Usuário" action="#{loginManagedBean.excluiUsuario}" 
												styleClass="btn btn-default" style="float:right"/>
								
							</p>
							</h:panelGrid>
						</h:form>
					</div>
				</div>
			</div>
		</div>
		
		
<div class="col-xs-12 col-sm-8 col-md-8 col-lg-8 pb-5">
	<div class="fluid-container">
	


	<!-- Aqui começa o formulário que vocês devem editar -->
	<!-- enctype="multipart/form-data" usado na preparação para envio de arquivos -->
	<h:form id="ativaCadastro" style="margin: 35px;">
			<!-- Botão que deve liberar o formulário de cadastro -->
			<!-- Talvez seja uma edição da classe display do css... Procurar como esconder e mostrar 
			elemento html usando Javascript -->
		<div style="width: 400px; height: 50px; margin: 0 auto;">
				<h:commandButton value="Liberar Cadastro" 
								 styleClass="btn btn-default ml-5" style="float:left;"
								 action="#{produtoManagedBean.ativaForm}"
								 rendered="#{produtoManagedBean.form eq false}"/>
		</div>
	</h:form>
	<div style="margin-top: 15px;">
	<hr style="width:90%" />		
	<h:form id="cadastroProduto" binding="#{cadastroBean.cadastroProduto}" enctype="multipart/form-data"
			rendered="#{produtoManagedBean.form}">
		<!-- class="d-none" :: d-none é display none do Bootstrap -->
		<!-- alinhar formulário, esse panelGrid é um elemento do JSF, 
			collumns="2" faz com que cada a 2 elementos do formulário ele jogue os elementos para a linha de baixo 
			exemplo:: Nome + caixa de texto :: pula linha email+caixa de texto
			caso haja um h:panelGroup ele conta tudo que estiver nessa tag como um único elemento. -->
		
		<h3 style="color: blue;">Cadastrar produto:</h3>
		<h:panelGrid columns="2" style="width=100%; margin: 20px;" binding="#{cadastroBean.prodCadastro}" 
					 id="cadastroProduto">
			<h:outputLabel value="Nome: " style="font-weight: bold; color:blue;" />
			<h:panelGroup>
			<!-- Aqui começa o formulário de cadastro do produto -->
			<!-- deve receber algum css para ficar oculto que será 
				 manipulado por javascript para aparecer ao ser clicado -->
				<h:inputText jsf:placeholder="Digite nome do produto ..." 
							 id="nome-produto"
							 styleClass="form-control"
							 style="width: 240px;" 
							 jsf:aria-describedby="sizing-addon3" 
							 value="#{produtoManagedBean.produto.nmProduto}" 
							 required="true"
							 requiredMessage="Campo nome é obrigatório!" />
				<h:message for="nome-produto" 
						   showSummary="True"
						   showDetail="True" />												  						  
			</h:panelGroup>
			
			<h:outputLabel value="Imagem do produto: " style="font-weight: bold; color:blue;" />
			<h:panelGroup>
				<!-- botão para upload -->
				<h:inputText jsf:type="file" 
							 value="#{produtoManagedBean.produto.imagemProduto}" 
							 id="upload" /> <br />
				<h:outputLabel value="A imagem deve ser quadrada e maior que 400x400px" 
							   required="true"
							   requiredMessage="Upload de imagem é obrigatório!"
							   style="color: #666; font-size:9px" />
			  	<h:message for="upload" 
					   showSummary="True"
					   showDetail="True" />									
			</h:panelGroup>							   
			
			<h:outputLabel value="Modelo: " style="font-weight: bold; color:blue;" />
			<h:panelGroup>
				<h:inputText jsf:placeholder="Digite modelo do produto ..."
							 id="modelo" 
							 styleClass="form-control"
							 style="width: 240px;" 
							 jsf:aria-describedby="sizing-addon3"  
							 value="#{produtoManagedBean.produto.modelo}"
							 required="true"
							 requiredMessage="Campo modelo é obrigatório!" />
				<h:message for="modelo" 
						   showSummary="True"
						   showDetail="True" />							
			</h:panelGroup>
			
			<h:outputLabel value="Categoria: " style="font-weight: bold; color:blue;" jsf:type="number" />
			<h:panelGroup>
				<!-- <h:inputText jsf:type="number"
						 id="categoria"									  		   
						 styleClass="form-control"
						 style="width: 65px;" 
						 jsf:aria-describedby="sizing-addon3" 
						 value="#{produtoManagedBean.produto.idCategoria}"
						 required="true"
						 requiredMessage="Campo categoria é obrigatório!" />  -->
				<h:selectOneMenu id="categoria"									  		   
						 		 styleClass="form-control"
						 		 style="width: 240px;" 
						 		 jsf:aria-describedby="sizing-addon3" 
						 	     value="#{produtoManagedBean.produto.idCategoria}"
						 		 required="true"
						 		 converter="javax.faces.Integer" >
					<f:selectItem itemValue="" itemLabel="Selecione categoria..." noSelectionOptions="true" />
					<f:selectItems value="#{produtoManagedBean.categorias}" 
								   var="categoria" 
								   itemValue="#{categoria.id}" 
								   itemLabel="#{categoria.categoria}" />
				</h:selectOneMenu>
				<h:message for="categoria" 
					   showSummary="True"
					   showDetail="True" />
			</h:panelGroup>
			
			<h:outputLabel value="Preço: " style="font-weight: bold; color:blue;" />
			<h:panelGroup>
				<h:inputText jsf:placeholder="Digite preco do produto ..."
							 id="preco" 
							 styleClass="form-control"
							 style="width: 240px;" 
							 jsf:aria-describedby="sizing-addon3"  
							 value="#{produtoManagedBean.produto.preco}"
							 required="true"
							 requiredMessage="Campo preço é obrigatório!">
							 <f:convertNumber minFractionDigits="2" locale="pt_BR" />
				</h:inputText>
				<h:message for="preco" 
						   showSummary="True"
						   showDetail="True" />
			</h:panelGroup>
								   
			<h:outputLabel value="Comentário: " style="font-weight: bold; color:blue;" />
			<h:panelGroup>
				<h:inputTextarea jsf:placeholder="Digite comentário sobre o produto ..."
							 id="comentario" 
							 styleClass="form-control"
							 style="width: 430px; height: 135px;" 
							 jsf:aria-describedby="sizing-addon3"  
							 value="#{produtoManagedBean.produto.coment}"
							 required="true" 
							 requiredMessage="Campo comentário é obrigatório!" />
				<h:message for="comentario" 
						   showSummary="True"
						   showDetail="True" />							
			</h:panelGroup>
			
			<h:outputLabel value="Pontuacao: " style="font-weight: bold; color:blue;" />
			<h:panelGroup>
			<!-- 
				<h:selectOneMenu value="#{produtoManagedBean.produto.pontuacao}">
					<f:selectItem itemValue="0" itemLabel="empty" id="empty" name="star" styleClass="fas fa-star" />
					<f:selectItem itemValue="1" itemLabel="one" id="one" name="star" styleClass="fas fa-star" />
					<f:selectItem itemValue="2" itemLabel="two" id="two" name="star" styleClass="fas fa-star" />
					<f:selectItem itemValue="3" itemLabel="three" id="three" name="star" styleClass="fas fa-star" />
					<f:selectItem itemValue="4" itemLabel="four" id="four" name="star" styleClass="fas fa-star" />
					<f:selectItem itemValue="5" itemLabel="five" id="five" name="star" styleClass="fas fa-star" />
				</h:selectOneMenu>
			 -->
		   <h:inputText jsf:type="number"
						 id="pontuacao"									  		   
						 styleClass="form-control"
						 style="width: 65px;" 
						 jsf:aria-describedby="sizing-addon3" 
						 value="#{produtoManagedBean.produto.pontuacao}"
						 required="true" />
			<!-- <div class="stars"
					 id="pontuacao" 
					 style="font-weight: heavy; 
					 padding: 2px; width: 117px;
					 border: 1px solid blue;">
					 	<input type="radio" id="empty" name="star" jsf:itemValue="0" jsf:value="#{produtoManagedBean.produto.pontuacao}" checked="true"/>
						<label for="one"><i class="fas fa-star"></i></label>
						<input type="radio" id="one" name="star" jsf:itemValue="1" jsf:value="#{produtoManagedBean.produto.pontuacao}" />
						<label for="two"><i class="fas fa-star"></i></label>
						<input type="radio" id="two" name="star" jsf:itemValue="2" jsf:value="#{produtoManagedBean.produto.pontuacao}" />
						<label for="three"><i class="fas fa-star"></i></label>
						<input type="radio" id="three" name="star" jsf:itemValue="3" jsf:value="#{produtoManagedBean.produto.pontuacao}" />
						<label for="four"><i class="fas fa-star"></i></label>
						<input type="radio" id="four" name="star" jsf:itemValue="4" jsf:value="#{produtoManagedBean.produto.pontuacao}" />
						<label for="five"><i class="fas fa-star"></i></label>
						<input type="radio" id="five" name="star" jsf:itemValue="5" jsf:value="#{produtoManagedBean.produto.pontuacao}" />
				</div>  -->
				<h:message for="pontuacao" 
						   showSummary="True"
						   showDetail="True" />							
			</h:panelGroup>
										  
			<h:messages id="successMsg" sticky="true" style="color: red; font-weight: bold" />
			<!-- Esse botão irá cadastrar -->	
			<h:commandButton value="Cadastrar Produto" id="cadastroBtn" 
							 action="#{produtoManagedBean.incluiProduto()}" 
							 update=":successMsg"
							 styleClass="btn btn-default" style="float: right; margin-top: 5px;" />
		</h:panelGrid>
	</h:form>
</div>		
		<!-- Aqui encerra o formulário que vocês devem editar -->
		<div class="produtos-cadastrados"
				     style="background: orange; width: 100%; height:auto; margint-top: 10px;">
				<h3 style="color:white; font-size: 18px; text-align: center; padding: 5px 2px;">
					<h:outputText value="Seus produtos cadastrados"/>
				</h3>
		</div>
		<table>
		  <tbody style="border: 1px solid grey;">
			<ui:repeat value="#{produtoManagedBean.produtosUsuario}" var="p">
				<tr style="color: white; background: orange; border: 1px solid grey;">
					<th style="padding: 5px 2px;">Id de Produto</th>
					<th style="padding: 5px 2px;">Nome do Produto</th>
					<th style="padding: 5px 2px;">Modelo</th>
					<th style="padding: 5px 2px;">Descrição</th>
					<th style="padding: 5px 2px;">Pontuação</th>
					<th style="padding: 5px 2px;">Data de Cadastro</th>
				</tr>
				<tr style="color: grey; padding: 5px 2px; border: 1px solid grey;">
					<td style="padding: 5px 2px;">#{p.idProduto}</td>
					<td style="padding: 5px 2px;">#{p.nmProduto}</td>
					<td style="padding: 5px 2px;">#{p.modelo}</td>
					<td style="font-size: 14px; padding: 5px 2px;">#{p.coment}</td>
					<td style="padding: 5px 2px;">#{p.pontuacao}</td>
					<td style="padding: 5px 2px;">#{p.dtCadastro}</td>
				</tr>					
				<tr style="padding: 5px 2px;">
					<td></td>
					<td></td>
					<td></td>
					<td></td>
					<td><h:commandButton value="Alterar Produto" 
										 style="background: blue; color: white; padding: 5px 2px;"
										 styleClass="btn btn-default" /></td>
					<td><h:commandButton value="Deletar Produto" 
										 style="background: red; color: white; padding: 5px 2px;"
										 styleClass="btn btn-default" /></td>
				</tr>
			</ui:repeat>
		  </tbody>
		</table>
			
	</div>	
</div>		
</aside>
	<!-- Informação lateral, apresentação do site -->				
	<aside id="aside" role="complementary" class="d-none d-sm-block presentation col-xs-0 col-sm-4 col-md-4 col-lg-4">								
		<div class="page-header px-3 py-3">
			<h3 class="user">Bem Vindo, #{loginManagedBean.usuario.nome}!</h3>
		</div>
		<img src="./resources/img/lamp.png" alt="Lampada"/>
		<p>A <b>EscolhaCerta</b> de um produto nunca foi tão fácil</p>
		<p class="text-box">Você busca produtos de acordo com a experiência de outros consumidores.</p>		
	</aside>
</div>
<!-- footer -->
<!-- <footer class="nav-container">
	<div class="page-header p-4" style="background-color:#f1f1f1;"></div>
</footer> -->		
		
		<!-- Calendar code -->
		<script type="text/javascript">
            $(function () {
                $('#datetimepicker1').datetimepicker();
            });
        </script>
		
		<!-- Javascript das dependências do Bootstrap -->							
		<script type="text/javascript" src="#{request.contextPath}/resources/bootstrap/js/jquery.min.js"></script>
		<script type="text/javascript" src="#{request.contextPath}/resources/bootstrap/js/popper.min.js"></script>
		<script type="text/javascript" src="#{request.contextPath}/resources/bootstrap/js/bootstrap.min.js"></script>
</h:body>
</html>